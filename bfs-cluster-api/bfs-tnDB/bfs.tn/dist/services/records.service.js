const a40_0x5ec7=['startsWith','afid_','get','assign','updateTime','mini','md5','object','thisCluster','sha1_','select','defineProperty','selectUpdatedRows','whereBetween','agfid','length','UPDATE_TIME','sha1','../mysql/mysql.module','@nestjs/common','TABLE_NAME','Injectable','map','where','decorate','withSchema','TABLE_SCHEMA','information_schema','lite','getUpdatedTables','mysql','getAllBetween','RecordsService','getOwnPropertyDescriptor','agfid_','__decorate','buffer2Hex'];(function(_0x2a72b2,_0x5ec75d){const _0x8cad1d=function(_0x1ebb1b){while(--_0x1ebb1b){_0x2a72b2['push'](_0x2a72b2['shift']());}};_0x8cad1d(++_0x5ec75d);}(a40_0x5ec7,0x116));const a40_0x8cad=function(_0x2a72b2,_0x5ec75d){_0x2a72b2=_0x2a72b2-0x0;let _0x8cad1d=a40_0x5ec7[_0x2a72b2];return _0x8cad1d;};'use strict';var __decorate=this&&this[a40_0x8cad('0x10')]||function(_0x4defde,_0x660540,_0x31c3ee,_0x46f412){var _0x50468f=arguments[a40_0x8cad('0x21')],_0x3e7250=_0x50468f<0x3?_0x660540:_0x46f412===null?_0x46f412=Object[a40_0x8cad('0xe')](_0x660540,_0x31c3ee):_0x46f412,_0x12b6af;if(typeof Reflect===a40_0x8cad('0x19')&&typeof Reflect[a40_0x8cad('0x5')]==='function')_0x3e7250=Reflect[a40_0x8cad('0x5')](_0x4defde,_0x660540,_0x31c3ee,_0x46f412);else for(var _0x3fb230=_0x4defde[a40_0x8cad('0x21')]-0x1;_0x3fb230>=0x0;_0x3fb230--)if(_0x12b6af=_0x4defde[_0x3fb230])_0x3e7250=(_0x50468f<0x3?_0x12b6af(_0x3e7250):_0x50468f>0x3?_0x12b6af(_0x660540,_0x31c3ee,_0x3e7250):_0x12b6af(_0x660540,_0x31c3ee))||_0x3e7250;return _0x50468f>0x3&&_0x3e7250&&Object[a40_0x8cad('0x1d')](_0x660540,_0x31c3ee,_0x3e7250),_0x3e7250;};Object['defineProperty'](exports,'__esModule',{'value':!![]});const common_1=require(a40_0x8cad('0x0'));const config_1=require('../config');const utils_1=require('../lib/utils');const mysql_module_1=require(a40_0x8cad('0x24'));let RecordsService=class RecordsService{async[a40_0x8cad('0xa')](_0x4b3770,_0x432e36){return mysql_module_1['mysql']('TABLES')[a40_0x8cad('0x6')](a40_0x8cad('0x8'))['select'](a40_0x8cad('0x1'))[a40_0x8cad('0x4')](a40_0x8cad('0x7'),config_1['thisCluster'])[a40_0x8cad('0x1f')](a40_0x8cad('0x22'),[_0x4b3770,_0x432e36]);}async[a40_0x8cad('0xc')](_0x4911b9,_0x432725,_0x79f12c){return mysql_module_1[a40_0x8cad('0xb')](_0x4911b9)[a40_0x8cad('0x6')](config_1[a40_0x8cad('0x1a')])[a40_0x8cad('0x1c')]()[a40_0x8cad('0x4')](_0x25ff02=>_0x25ff02[a40_0x8cad('0x1f')](a40_0x8cad('0x16'),[_0x432725,_0x79f12c]));}async['selectUpdatedRows'](_0x37e67e,_0x156f7f,_0x645fc){if(_0x37e67e[a40_0x8cad('0x12')](a40_0x8cad('0x13'))){const _0x399da4=await this[a40_0x8cad('0xc')](_0x37e67e,_0x156f7f,_0x645fc);return _0x399da4[a40_0x8cad('0x3')](_0x49c9b9=>Object[a40_0x8cad('0x15')](Object[a40_0x8cad('0x15')]({},_0x49c9b9),{'afid':utils_1[a40_0x8cad('0x11')](_0x49c9b9['afid']),'mini':utils_1[a40_0x8cad('0x11')](_0x49c9b9[a40_0x8cad('0x17')]),'lite':utils_1[a40_0x8cad('0x11')](_0x49c9b9[a40_0x8cad('0x9')])}));}else if(_0x37e67e['startsWith'](a40_0x8cad('0xf'))){const _0x598b47=await this[a40_0x8cad('0xc')](_0x37e67e,_0x156f7f,_0x645fc);return _0x598b47[a40_0x8cad('0x3')](_0x406a9a=>Object[a40_0x8cad('0x15')](Object[a40_0x8cad('0x15')]({},_0x406a9a),{'agfid':utils_1[a40_0x8cad('0x11')](_0x406a9a[a40_0x8cad('0x20')])}));}else if(_0x37e67e[a40_0x8cad('0x12')]('md5_')){const _0x1ad59c=await this[a40_0x8cad('0xc')](_0x37e67e,_0x156f7f,_0x645fc);return _0x1ad59c['map'](_0x3d48c7=>Object[a40_0x8cad('0x15')](Object[a40_0x8cad('0x15')]({},_0x3d48c7),{'md5':utils_1[a40_0x8cad('0x11')](_0x3d48c7[a40_0x8cad('0x18')]),'afid':utils_1[a40_0x8cad('0x11')](_0x3d48c7['afid'])}));}else if(_0x37e67e[a40_0x8cad('0x12')](a40_0x8cad('0x1b'))){const _0x36d5d3=await this['getAllBetween'](_0x37e67e,_0x156f7f,_0x645fc);return _0x36d5d3['map'](_0x5f1fdc=>Object['assign'](Object[a40_0x8cad('0x15')]({},_0x5f1fdc),{'sha1':utils_1[a40_0x8cad('0x11')](_0x5f1fdc[a40_0x8cad('0x23')]),'afid':utils_1[a40_0x8cad('0x11')](_0x5f1fdc['afid'])}));}return[];}async[a40_0x8cad('0x14')](_0x5d4a1d,_0x30d67d){const _0x44cb58={};const _0x308fdd=await this[a40_0x8cad('0xa')](_0x5d4a1d,_0x30d67d);for(const {TABLE_NAME}of _0x308fdd){const _0x474486=await this[a40_0x8cad('0x1e')](TABLE_NAME,_0x5d4a1d,_0x30d67d);if(_0x474486['length']>0x0){_0x44cb58[TABLE_NAME]=_0x474486;}}return _0x44cb58;}};RecordsService=__decorate([common_1[a40_0x8cad('0x2')]()],RecordsService);exports[a40_0x8cad('0xd')]=RecordsService;