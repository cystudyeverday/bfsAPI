const a38_0x2516=['object','decorate','../lib/utils','../repositories/sha1.repository','metadata','sha1Repository','HashService','function','__decorate','updateHash','../config','hex2Buffer','length','@nestjs/common','thisCluster','md5Repository','defineProperty','Injectable','design:paramtypes','../lib/log','afidRegex','splitAfid','match','createLogger','Md5Repository','getOwnPropertyDescriptor'];(function(_0x147307,_0x25162b){const _0x2b9d62=function(_0xb03aed){while(--_0xb03aed){_0x147307['push'](_0x147307['shift']());}};_0x2b9d62(++_0x25162b);}(a38_0x2516,0xb9));const a38_0x2b9d=function(_0x147307,_0x25162b){_0x147307=_0x147307-0x0;let _0x2b9d62=a38_0x2516[_0x147307];return _0x2b9d62;};'use strict';var __decorate=this&&this[a38_0x2b9d('0x5')]||function(_0x484d32,_0x23511b,_0x26f4d1,_0x3b6bf0){var _0x1c5dc4=arguments[a38_0x2b9d('0x9')],_0x324034=_0x1c5dc4<0x3?_0x23511b:_0x3b6bf0===null?_0x3b6bf0=Object[a38_0x2b9d('0x16')](_0x23511b,_0x26f4d1):_0x3b6bf0,_0x189089;if(typeof Reflect===a38_0x2b9d('0x17')&&typeof Reflect['decorate']===a38_0x2b9d('0x4'))_0x324034=Reflect[a38_0x2b9d('0x18')](_0x484d32,_0x23511b,_0x26f4d1,_0x3b6bf0);else for(var _0x3361d8=_0x484d32['length']-0x1;_0x3361d8>=0x0;_0x3361d8--)if(_0x189089=_0x484d32[_0x3361d8])_0x324034=(_0x1c5dc4<0x3?_0x189089(_0x324034):_0x1c5dc4>0x3?_0x189089(_0x23511b,_0x26f4d1,_0x324034):_0x189089(_0x23511b,_0x26f4d1))||_0x324034;return _0x1c5dc4>0x3&&_0x324034&&Object[a38_0x2b9d('0xd')](_0x23511b,_0x26f4d1,_0x324034),_0x324034;};var __metadata=this&&this['__metadata']||function(_0xb7bbe9,_0x7c5ebd){if(typeof Reflect===a38_0x2b9d('0x17')&&typeof Reflect[a38_0x2b9d('0x1')]===a38_0x2b9d('0x4'))return Reflect[a38_0x2b9d('0x1')](_0xb7bbe9,_0x7c5ebd);};Object[a38_0x2b9d('0xd')](exports,'__esModule',{'value':!![]});const common_1=require(a38_0x2b9d('0xa'));const config_1=require(a38_0x2b9d('0x7'));const log_1=require(a38_0x2b9d('0x10'));const utils_1=require(a38_0x2b9d('0x19'));const md5_repository_1=require('../repositories/md5.repository');const sha1_repository_1=require(a38_0x2b9d('0x0'));const logger=log_1[a38_0x2b9d('0x14')](__filename);let HashService=class HashService{constructor(_0x3f1836,_0x4e75e2){this['md5Repository']=_0x3f1836;this['sha1Repository']=_0x4e75e2;}[a38_0x2b9d('0x12')](_0x542151){const _0x3e3d94=_0x542151[a38_0x2b9d('0x13')](config_1[a38_0x2b9d('0x11')]);if(!_0x3e3d94){logger['error'](_0x542151);return;}const [_0x5e2495,_0xe0706e,_0x10fbac,_0x5e6c72,_0x5cfb71,_0xd44515]=_0x3e3d94;return{'version':_0xe0706e,'length':_0x10fbac,'sha1':_0x5e6c72,'md5':_0x5cfb71,'_88sha1':_0xd44515};}async[a38_0x2b9d('0x6')](_0x5baab1,_0x1f8820){const _0x501840=this[a38_0x2b9d('0x12')](_0x1f8820);if(!_0x501840){return;}const {sha1,md5}=_0x501840;await this[a38_0x2b9d('0xc')]['upsert'](_0x5baab1,config_1['thisCluster'],{'md5':utils_1[a38_0x2b9d('0x8')](md5),'afid':utils_1[a38_0x2b9d('0x8')](_0x1f8820)});await this[a38_0x2b9d('0x2')]['upsert'](_0x5baab1,config_1[a38_0x2b9d('0xb')],{'sha1':utils_1[a38_0x2b9d('0x8')](sha1),'afid':utils_1['hex2Buffer'](_0x1f8820)});}};HashService=__decorate([common_1[a38_0x2b9d('0xe')](),__metadata(a38_0x2b9d('0xf'),[md5_repository_1[a38_0x2b9d('0x15')],sha1_repository_1['Sha1Repository']])],HashService);exports[a38_0x2b9d('0x3')]=HashService;