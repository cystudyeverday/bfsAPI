const a52_0xf0be=['dbService','TnodeRepository','length','metadata','default','firstTn','thisCluster','getAll','../services/db.service','axios','../config','object','../lib/log','create','design:paramtypes','selfUrl','tnodeRepository','defineProperty','sendSelfInfo','/tnodes','getOwnPropertyDescriptor','../repositories/tnode.repository','function','createLogger','send\x20self\x20info\x20to\x20first\x20tnode','post','__metadata','DbService','upsert','@nestjs/common','__decorate'];(function(_0xae7c49,_0xf0be47){const _0x1a3097=function(_0x379b61){while(--_0x379b61){_0xae7c49['push'](_0xae7c49['shift']());}};_0x1a3097(++_0xf0be47);}(a52_0xf0be,0x91));const a52_0x1a30=function(_0xae7c49,_0xf0be47){_0xae7c49=_0xae7c49-0x0;let _0x1a3097=a52_0xf0be[_0xae7c49];return _0x1a3097;};'use strict';var __decorate=this&&this[a52_0x1a30('0x9')]||function(_0x16294a,_0x38a77a,_0x1638d2,_0x5d3ba2){var _0x64e99c=arguments[a52_0x1a30('0xc')],_0x56d1ab=_0x64e99c<0x3?_0x38a77a:_0x5d3ba2===null?_0x5d3ba2=Object[a52_0x1a30('0x1e')](_0x38a77a,_0x1638d2):_0x5d3ba2,_0x4bbb4f;if(typeof Reflect===a52_0x1a30('0x15')&&typeof Reflect['decorate']===a52_0x1a30('0x1'))_0x56d1ab=Reflect['decorate'](_0x16294a,_0x38a77a,_0x1638d2,_0x5d3ba2);else for(var _0x33c2ea=_0x16294a['length']-0x1;_0x33c2ea>=0x0;_0x33c2ea--)if(_0x4bbb4f=_0x16294a[_0x33c2ea])_0x56d1ab=(_0x64e99c<0x3?_0x4bbb4f(_0x56d1ab):_0x64e99c>0x3?_0x4bbb4f(_0x38a77a,_0x1638d2,_0x56d1ab):_0x4bbb4f(_0x38a77a,_0x1638d2))||_0x56d1ab;return _0x64e99c>0x3&&_0x56d1ab&&Object[a52_0x1a30('0x1b')](_0x38a77a,_0x1638d2,_0x56d1ab),_0x56d1ab;};var __metadata=this&&this[a52_0x1a30('0x5')]||function(_0x778aab,_0x2ec999){if(typeof Reflect==='object'&&typeof Reflect['metadata']===a52_0x1a30('0x1'))return Reflect[a52_0x1a30('0xd')](_0x778aab,_0x2ec999);};Object[a52_0x1a30('0x1b')](exports,'__esModule',{'value':!![]});const common_1=require(a52_0x1a30('0x8'));const axios_1=require(a52_0x1a30('0x13'));const config_1=require(a52_0x1a30('0x14'));const log_1=require(a52_0x1a30('0x16'));const tnode_repository_1=require(a52_0x1a30('0x0'));const db_service_1=require(a52_0x1a30('0x12'));const logger=log_1[a52_0x1a30('0x2')](__filename);let TnodesService=class TnodesService{constructor(_0x449051,_0x1a62df){this[a52_0x1a30('0x1a')]=_0x449051;this['dbService']=_0x1a62df;}async[a52_0x1a30('0x1c')](){await this[a52_0x1a30('0x1a')][a52_0x1a30('0x7')]({'cluster':config_1[a52_0x1a30('0x10')],'url':config_1['selfUrl']});if(!config_1[a52_0x1a30('0xf')]){return;}const {cluster,url}=config_1[a52_0x1a30('0xf')];if(!cluster||!url){return;}await this[a52_0x1a30('0x1a')][a52_0x1a30('0x7')]({'cluster':cluster,'url':url});const _0x5707b0=axios_1[a52_0x1a30('0xe')][a52_0x1a30('0x17')]({'baseURL':url,'timeout':0x2710});logger['info'](a52_0x1a30('0x3'));await _0x5707b0[a52_0x1a30('0x4')](a52_0x1a30('0x1d'),{'cluster':config_1['thisCluster'],'url':config_1[a52_0x1a30('0x19')]});}async['createCluster4Tnodes'](){const _0x1a718=await this[a52_0x1a30('0x1a')][a52_0x1a30('0x11')]();for(const {cluster}of _0x1a718){if(cluster===config_1['thisCluster']){continue;}await this[a52_0x1a30('0xa')]['createClusterSchema'](cluster);}}};TnodesService=__decorate([common_1['Injectable'](),__metadata(a52_0x1a30('0x18'),[tnode_repository_1[a52_0x1a30('0xb')],db_service_1[a52_0x1a30('0x6')]])],TnodesService);exports['TnodesService']=TnodesService;