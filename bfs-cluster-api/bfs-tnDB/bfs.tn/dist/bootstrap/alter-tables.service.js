const a1_0x385b=['renameTable','decorate','info','length','@nestjs/common','../mysql/mysql.module','getOwnPropertyDescriptor','__esModule','run','TABLE_TYPE','object','schema','AlterTablesService','TABLE_NAME','select','../config','\x5c_%','rename\x20tables\x20from\x20','withSchema','entries','information_schema','defineProperty','createLogger','TABLES','mysql','getTablesByPrefix','__decorate','replace','where','changePrefixs','like'];(function(_0x56f10a,_0x385bb0){const _0x1aace4=function(_0x325ae6){while(--_0x325ae6){_0x56f10a['push'](_0x56f10a['shift']());}};_0x1aace4(++_0x385bb0);}(a1_0x385b,0x1d1));const a1_0x1aac=function(_0x56f10a,_0x385bb0){_0x56f10a=_0x56f10a-0x0;let _0x1aace4=a1_0x385b[_0x56f10a];return _0x1aace4;};'use strict';var __decorate=this&&this[a1_0x1aac('0x1a')]||function(_0x10dadf,_0x53d26b,_0x203ca4,_0xe2540f){var _0x14bae0=arguments[a1_0x1aac('0x3')],_0x22239e=_0x14bae0<0x3?_0x53d26b:_0xe2540f===null?_0xe2540f=Object[a1_0x1aac('0x6')](_0x53d26b,_0x203ca4):_0xe2540f,_0x5f4ea6;if(typeof Reflect===a1_0x1aac('0xa')&&typeof Reflect[a1_0x1aac('0x1')]==='function')_0x22239e=Reflect[a1_0x1aac('0x1')](_0x10dadf,_0x53d26b,_0x203ca4,_0xe2540f);else for(var _0x1f42c1=_0x10dadf[a1_0x1aac('0x3')]-0x1;_0x1f42c1>=0x0;_0x1f42c1--)if(_0x5f4ea6=_0x10dadf[_0x1f42c1])_0x22239e=(_0x14bae0<0x3?_0x5f4ea6(_0x22239e):_0x14bae0>0x3?_0x5f4ea6(_0x53d26b,_0x203ca4,_0x22239e):_0x5f4ea6(_0x53d26b,_0x203ca4))||_0x22239e;return _0x14bae0>0x3&&_0x22239e&&Object[a1_0x1aac('0x15')](_0x53d26b,_0x203ca4,_0x22239e),_0x22239e;};Object[a1_0x1aac('0x15')](exports,a1_0x1aac('0x7'),{'value':!![]});const common_1=require(a1_0x1aac('0x4'));const config_1=require(a1_0x1aac('0xf'));const log_1=require('../lib/log');const mysql_module_1=require(a1_0x1aac('0x5'));const logger=log_1[a1_0x1aac('0x16')](__filename);let AlterTablesService=class AlterTablesService{async[a1_0x1aac('0x19')](_0x20f660){return mysql_module_1[a1_0x1aac('0x18')](a1_0x1aac('0x17'))[a1_0x1aac('0x12')](a1_0x1aac('0x14'))[a1_0x1aac('0xe')]('TABLE_SCHEMA',a1_0x1aac('0xd'))[a1_0x1aac('0x1c')]('TABLE_NAME',a1_0x1aac('0x1e'),_0x20f660+a1_0x1aac('0x10'))[a1_0x1aac('0x1c')](a1_0x1aac('0x9'),'BASE\x20TABLE');}async[a1_0x1aac('0x1d')](_0x2fd6c1,_0x134a22){logger[a1_0x1aac('0x2')](a1_0x1aac('0x11')+_0x2fd6c1+'\x20to\x20'+_0x134a22);const _0xa10574=await this['getTablesByPrefix'](_0x2fd6c1);for(const {TABLE_SCHEMA,TABLE_NAME}of _0xa10574){const _0x28e24e=TABLE_SCHEMA+'.'+TABLE_NAME;await mysql_module_1[a1_0x1aac('0x18')][a1_0x1aac('0xb')][a1_0x1aac('0x0')](_0x28e24e,_0x28e24e[a1_0x1aac('0x1b')](_0x2fd6c1,_0x134a22));}}async[a1_0x1aac('0x8')](){for(const [_0x5edcc5,_0x179890]of Object[a1_0x1aac('0x13')](config_1['oldPrefix2fileId'])){await this[a1_0x1aac('0x1d')](_0x5edcc5,_0x179890);}}};AlterTablesService=__decorate([common_1['Injectable']()],AlterTablesService);exports[a1_0x1aac('0xc')]=AlterTablesService;