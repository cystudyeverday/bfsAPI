const a3_0x162a=['createLogger','__esModule','__decorate','ParseClusterService','decorate','defineProperty','info','linebreakRegex','getOwnPropertyDescriptor','generateRnodes','object','readFileSync','default','exit','shift','metadata','@nestjs/common','fs-extra','length','../lib/log','../services/db.service','run','error','dbService','DbService','function','split','no\x20cluster\x20in\x20txt','clustertxtPath','parse\x20cluster.txt','utf8','line2Obj','env','../lib/utils','__metadata','CLUSTER'];(function(_0x559306,_0x162a87){const _0x388e14=function(_0x24c4c3){while(--_0x24c4c3){_0x559306['push'](_0x559306['shift']());}};_0x388e14(++_0x162a87);}(a3_0x162a,0x1cb));const a3_0x388e=function(_0x559306,_0x162a87){_0x559306=_0x559306-0x0;let _0x388e14=a3_0x162a[_0x559306];return _0x388e14;};'use strict';var __decorate=this&&this[a3_0x388e('0xb')]||function(_0x4d9908,_0x5bfffb,_0x26f765,_0x1a0a80){var _0x16905d=arguments[a3_0x388e('0x1b')],_0x516ee8=_0x16905d<0x3?_0x5bfffb:_0x1a0a80===null?_0x1a0a80=Object[a3_0x388e('0x11')](_0x5bfffb,_0x26f765):_0x1a0a80,_0x27e490;if(typeof Reflect===a3_0x388e('0x13')&&typeof Reflect[a3_0x388e('0xd')]===a3_0x388e('0x22'))_0x516ee8=Reflect[a3_0x388e('0xd')](_0x4d9908,_0x5bfffb,_0x26f765,_0x1a0a80);else for(var _0x1678f0=_0x4d9908['length']-0x1;_0x1678f0>=0x0;_0x1678f0--)if(_0x27e490=_0x4d9908[_0x1678f0])_0x516ee8=(_0x16905d<0x3?_0x27e490(_0x516ee8):_0x16905d>0x3?_0x27e490(_0x5bfffb,_0x26f765,_0x516ee8):_0x27e490(_0x5bfffb,_0x26f765))||_0x516ee8;return _0x16905d>0x3&&_0x516ee8&&Object[a3_0x388e('0xe')](_0x5bfffb,_0x26f765,_0x516ee8),_0x516ee8;};var __metadata=this&&this[a3_0x388e('0x7')]||function(_0x31dcfb,_0x19eaa1){if(typeof Reflect===a3_0x388e('0x13')&&typeof Reflect[a3_0x388e('0x18')]===a3_0x388e('0x22'))return Reflect['metadata'](_0x31dcfb,_0x19eaa1);};Object['defineProperty'](exports,a3_0x388e('0xa'),{'value':!![]});const common_1=require(a3_0x388e('0x19'));const fs=require(a3_0x388e('0x1a'));const config_1=require('../config');const log_1=require(a3_0x388e('0x1c'));const utils_1=require(a3_0x388e('0x6'));const db_service_1=require(a3_0x388e('0x1d'));const logger=log_1[a3_0x388e('0x9')](__filename);let ParseClusterService=class ParseClusterService{constructor(_0x3b5f5b){this['dbService']=_0x3b5f5b;}async[a3_0x388e('0x1e')](){logger[a3_0x388e('0xf')](a3_0x388e('0x2'));const _0x1758a4=fs[a3_0x388e('0x14')](config_1[a3_0x388e('0x1')],a3_0x388e('0x3'))[a3_0x388e('0x23')](config_1[a3_0x388e('0x10')]);const _0x23659a=_0x1758a4[a3_0x388e('0x17')]();if(!_0x23659a){logger[a3_0x388e('0x1f')]('first\x20line\x20of\x20cluster.txt\x20is\x20null');process[a3_0x388e('0x16')](0x1);}const {cluster}=utils_1[a3_0x388e('0x15')][a3_0x388e('0x4')](_0x23659a);if(!cluster){logger[a3_0x388e('0x1f')](a3_0x388e('0x0'));process[a3_0x388e('0x16')](0x1);}process[a3_0x388e('0x5')][a3_0x388e('0x8')]=cluster;await this[a3_0x388e('0x20')]['prepareAll'](cluster);await this['dbService'][a3_0x388e('0x12')](_0x1758a4);}};ParseClusterService=__decorate([common_1['Injectable'](),__metadata('design:paramtypes',[db_service_1[a3_0x388e('0x21')]])],ParseClusterService);exports[a3_0x388e('0xc')]=ParseClusterService;