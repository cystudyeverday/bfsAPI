const a24_0x4162=['__decorate','getOwnPropertySymbols','prototype','propertyIsEnumerable','Injectable','getAfidByMini','call','getOne','afid_','../lib/utils','mysql','where','getPostfix','length','thisCluster','afid','indexOf','AfidRepository','__esModule','decorate','function','withSchema','getTb','defineProperty','first','buffer2Hex','../config','hasOwnProperty','lite','getAfidByLite'];(function(_0x34dd10,_0x41629b){const _0x4de6a6=function(_0xd00708){while(--_0xd00708){_0x34dd10['push'](_0x34dd10['shift']());}};_0x4de6a6(++_0x41629b);}(a24_0x4162,0x142));const a24_0x4de6=function(_0x34dd10,_0x41629b){_0x34dd10=_0x34dd10-0x0;let _0x4de6a6=a24_0x4162[_0x34dd10];return _0x4de6a6;};'use strict';var __decorate=this&&this[a24_0x4de6('0x8')]||function(_0x5352ce,_0x972a70,_0x386b0a,_0x2915c3){var _0x2ec8b1=arguments[a24_0x4de6('0x15')],_0x321495=_0x2ec8b1<0x3?_0x972a70:_0x2915c3===null?_0x2915c3=Object['getOwnPropertyDescriptor'](_0x972a70,_0x386b0a):_0x2915c3,_0x2049f1;if(typeof Reflect==='object'&&typeof Reflect[a24_0x4de6('0x1b')]==='function')_0x321495=Reflect[a24_0x4de6('0x1b')](_0x5352ce,_0x972a70,_0x386b0a,_0x2915c3);else for(var _0x51c4ed=_0x5352ce['length']-0x1;_0x51c4ed>=0x0;_0x51c4ed--)if(_0x2049f1=_0x5352ce[_0x51c4ed])_0x321495=(_0x2ec8b1<0x3?_0x2049f1(_0x321495):_0x2ec8b1>0x3?_0x2049f1(_0x972a70,_0x386b0a,_0x321495):_0x2049f1(_0x972a70,_0x386b0a))||_0x321495;return _0x2ec8b1>0x3&&_0x321495&&Object[a24_0x4de6('0x1')](_0x972a70,_0x386b0a,_0x321495),_0x321495;};var __rest=this&&this['__rest']||function(_0x429859,_0x14fe8b){var _0x3a0490={};for(var _0x3ca671 in _0x429859)if(Object[a24_0x4de6('0xa')][a24_0x4de6('0x5')]['call'](_0x429859,_0x3ca671)&&_0x14fe8b['indexOf'](_0x3ca671)<0x0)_0x3a0490[_0x3ca671]=_0x429859[_0x3ca671];if(_0x429859!=null&&typeof Object[a24_0x4de6('0x9')]===a24_0x4de6('0x1c'))for(var _0x4962a7=0x0,_0x3ca671=Object[a24_0x4de6('0x9')](_0x429859);_0x4962a7<_0x3ca671['length'];_0x4962a7++){if(_0x14fe8b[a24_0x4de6('0x18')](_0x3ca671[_0x4962a7])<0x0&&Object['prototype'][a24_0x4de6('0xb')][a24_0x4de6('0xe')](_0x429859,_0x3ca671[_0x4962a7]))_0x3a0490[_0x3ca671[_0x4962a7]]=_0x429859[_0x3ca671[_0x4962a7]];}return _0x3a0490;};Object[a24_0x4de6('0x1')](exports,a24_0x4de6('0x1a'),{'value':!![]});const common_1=require('@nestjs/common');const config_1=require(a24_0x4de6('0x4'));const utils_1=require(a24_0x4de6('0x11'));const mysql_module_1=require('../mysql/mysql.module');let AfidRepository=class AfidRepository{['getTb'](_0x16e0b8){return a24_0x4de6('0x10')+_0x16e0b8;}async[a24_0x4de6('0xd')](_0x493c71){const _0x30d209=await mysql_module_1[a24_0x4de6('0x12')](this[a24_0x4de6('0x0')](utils_1[a24_0x4de6('0x14')](_0x493c71)))[a24_0x4de6('0x1d')](config_1['thisCluster'])[a24_0x4de6('0x2')](a24_0x4de6('0x17'))['where']('mini',utils_1['hex2Buffer'](_0x493c71));if(!_0x30d209){return'';}return utils_1['buffer2Hex'](_0x30d209[a24_0x4de6('0x17')]);}async[a24_0x4de6('0x7')](_0x44130f){const _0x2df810=await mysql_module_1['mysql'](this['getTb'](utils_1['getPostfix'](_0x44130f)))[a24_0x4de6('0x1d')](config_1[a24_0x4de6('0x16')])['first'](a24_0x4de6('0x17'))[a24_0x4de6('0x13')](a24_0x4de6('0x6'),utils_1['hex2Buffer'](_0x44130f));if(!_0x2df810){return'';}return utils_1[a24_0x4de6('0x3')](_0x2df810['afid']);}async[a24_0x4de6('0xf')](_0x1d6aa6,_0x37c229,_0x273b27){return mysql_module_1[a24_0x4de6('0x12')](this['getTb'](_0x37c229))[a24_0x4de6('0x1d')](_0x1d6aa6)[a24_0x4de6('0x2')]()[a24_0x4de6('0x13')](_0x273b27);}async['upsert'](_0x1d9793,_0xba0390,_0xa01545){const {afid}=_0xa01545,_0x217884=__rest(_0xa01545,[a24_0x4de6('0x17')]);const _0x4718ec=utils_1['getPostfix'](utils_1[a24_0x4de6('0x3')](afid));return utils_1['upsertFactory'](_0x1d9793,_0xba0390,this[a24_0x4de6('0x0')](_0x4718ec),_0xa01545,_0x217884,{'afid':afid});}};AfidRepository=__decorate([common_1[a24_0x4de6('0xc')]()],AfidRepository);exports[a24_0x4de6('0x19')]=AfidRepository;